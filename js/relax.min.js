"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

// ------------------------------------------
// Rellax.js
// Buttery smooth parallax library
// Copyright (c) 2016 Moe Amaya (@moeamaya)
// MIT license
//
// Thanks to Paraxify.js and Jaime Cabllero
// for parallax concepts
// ------------------------------------------
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define([], factory);
  } else if ((typeof module === "undefined" ? "undefined" : _typeof(module)) === 'object' && module.exports) {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory();
  } else {
    // Browser globals (root is window)
    root.Rellax = factory();
  }
})(typeof window !== "undefined" ? window : global, function () {
  var Rellax = function Rellax(el, options) {
    "use strict";

    var self = Object.create(Rellax.prototype);
    var posY = 0;
    var screenY = 0;
    var posX = 0;
    var screenX = 0;
    var blocks = [];
    var pause = true; // check what requestAnimationFrame to use, and if
    // it's not supported, use the onscroll event

    var loop = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function (callback) {
      return setTimeout(callback, 1000 / 60);
    }; // store the id for later use


    var loopId = null; // Test via a getter in the options object to see if the passive property is accessed

    var supportsPassive = false;

    try {
      var opts = Object.defineProperty({}, 'passive', {
        get: function get() {
          supportsPassive = true;
        }
      });
      window.addEventListener("testPassive", null, opts);
      window.removeEventListener("testPassive", null, opts);
    } catch (e) {} // check what cancelAnimation method to use


    var clearLoop = window.cancelAnimationFrame || window.mozCancelAnimationFrame || clearTimeout; // check which transform property to use

    var transformProp = window.transformProp || function () {
      var testEl = document.createElement('div');

      if (testEl.style.transform === null) {
        var vendors = ['Webkit', 'Moz', 'ms'];

        for (var vendor in vendors) {
          if (testEl.style[vendors[vendor] + 'Transform'] !== undefined) {
            return vendors[vendor] + 'Transform';
          }
        }
      }

      return 'transform';
    }(); // Default Settings


    self.options = {
      speed: -2,
      verticalSpeed: null,
      horizontalSpeed: null,
      breakpoints: [576, 768, 1201],
      center: false,
      wrapper: null,
      relativeToWrapper: false,
      round: true,
      vertical: true,
      horizontal: false,
      verticalScrollAxis: "y",
      horizontalScrollAxis: "x",
      callback: function callback() {}
    }; // User defined options (might have more in the future)

    if (options) {
      Object.keys(options).forEach(function (key) {
        self.options[key] = options[key];
      });
    }

    function validateCustomBreakpoints() {
      if (self.options.breakpoints.length === 3 && Array.isArray(self.options.breakpoints)) {
        var isAscending = true;
        var isNumerical = true;
        var lastVal;
        self.options.breakpoints.forEach(function (i) {
          if (typeof i !== 'number') isNumerical = false;

          if (lastVal !== null) {
            if (i < lastVal) isAscending = false;
          }

          lastVal = i;
        });
        if (isAscending && isNumerical) return;
      } // revert defaults if set incorrectly


      self.options.breakpoints = [576, 768, 1201];
      console.warn("Rellax: You must pass an array of 3 numbers in ascending order to the breakpoints option. Defaults reverted");
    }

    if (options && options.breakpoints) {
      validateCustomBreakpoints();
    } // By default, rellax class


    if (!el) {
      el = '.rellax';
    } // check if el is a className or a node


    var elements = typeof el === 'string' ? document.querySelectorAll(el) : [el]; // Now query selector

    if (elements.length > 0) {
      self.elems = elements;
    } // The elements don't exist
    else {
        console.warn("Rellax: The elements you're trying to select don't exist.");
        return;
      } // Has a wrapper and it exists


    if (self.options.wrapper) {
      if (!self.options.wrapper.nodeType) {
        var wrapper = document.querySelector(self.options.wrapper);

        if (wrapper) {
          self.options.wrapper = wrapper;
        } else {
          console.warn("Rellax: The wrapper you're trying to use doesn't exist.");
          return;
        }
      }
    } // set a placeholder for the current breakpoint


    var currentBreakpoint; // helper to determine current breakpoint

    var getCurrentBreakpoint = function getCurrentBreakpoint(w) {
      var bp = self.options.breakpoints;
      if (w < bp[0]) return 'xs';
      if (w >= bp[0] && w < bp[1]) return 'sm';
      if (w >= bp[1] && w < bp[2]) return 'md';
      return 'lg';
    }; // Get and cache initial position of all elements


    var cacheBlocks = function cacheBlocks() {
      for (var i = 0; i < self.elems.length; i++) {
        var block = createBlock(self.elems[i]);
        blocks.push(block);
      }
    }; // Let's kick this script off
    // Build array for cached element values


    var init = function init() {
      for (var i = 0; i < blocks.length; i++) {
        self.elems[i].style.cssText = blocks[i].style;
      }

      blocks = [];
      screenY = window.innerHeight;
      screenX = window.innerWidth;
      currentBreakpoint = getCurrentBreakpoint(screenX);
      setPosition();
      cacheBlocks();
      animate(); // If paused, unpause and set listener for window resizing events

      if (pause) {
        window.addEventListener('resize', init);
        pause = false; // Start the loop

        update();
      }
    }; // We want to cache the parallax blocks'
    // values: base, top, height, speed
    // el: is dom object, return: el cache values


    var createBlock = function createBlock(el) {
      var dataPercentage = el.getAttribute('data-rellax-percentage');
      var dataSpeed = el.getAttribute('data-rellax-speed');
      var dataXsSpeed = el.getAttribute('data-rellax-xs-speed');
      var dataMobileSpeed = el.getAttribute('data-rellax-mobile-speed');
      var dataTabletSpeed = el.getAttribute('data-rellax-tablet-speed');
      var dataDesktopSpeed = el.getAttribute('data-rellax-desktop-speed');
      var dataVerticalSpeed = el.getAttribute('data-rellax-vertical-speed');
      var dataHorizontalSpeed = el.getAttribute('data-rellax-horizontal-speed');
      var dataVericalScrollAxis = el.getAttribute('data-rellax-vertical-scroll-axis');
      var dataHorizontalScrollAxis = el.getAttribute('data-rellax-horizontal-scroll-axis');
      var dataZindex = el.getAttribute('data-rellax-zindex') || 0;
      var dataMin = el.getAttribute('data-rellax-min');
      var dataMax = el.getAttribute('data-rellax-max');
      var dataMinX = el.getAttribute('data-rellax-min-x');
      var dataMaxX = el.getAttribute('data-rellax-max-x');
      var dataMinY = el.getAttribute('data-rellax-min-y');
      var dataMaxY = el.getAttribute('data-rellax-max-y');
      var mapBreakpoints;
      var breakpoints = true;

      if (!dataXsSpeed && !dataMobileSpeed && !dataTabletSpeed && !dataDesktopSpeed) {
        breakpoints = false;
      } else {
        mapBreakpoints = {
          'xs': dataXsSpeed,
          'sm': dataMobileSpeed,
          'md': dataTabletSpeed,
          'lg': dataDesktopSpeed
        };
      } // initializing at scrollY = 0 (top of browser), scrollX = 0 (left of browser)
      // ensures elements are positioned based on HTML layout.
      //
      // If the element has the percentage attribute, the posY and posX needs to be
      // the current scroll position's value, so that the elements are still positioned based on HTML layout


      var wrapperPosY = self.options.wrapper ? self.options.wrapper.scrollTop : window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop; // If the option relativeToWrapper is true, use the wrappers offset to top, subtracted from the current page scroll.

      if (self.options.relativeToWrapper) {
        var scrollPosY = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
        wrapperPosY = scrollPosY - self.options.wrapper.offsetTop;
      }

      var posY = self.options.vertical ? dataPercentage || self.options.center ? wrapperPosY : 0 : 0;
      var posX = self.options.horizontal ? dataPercentage || self.options.center ? self.options.wrapper ? self.options.wrapper.scrollLeft : window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft : 0 : 0;
      var blockTop = posY + el.getBoundingClientRect().top;
      var blockHeight = el.clientHeight || el.offsetHeight || el.scrollHeight;
      var blockLeft = posX + el.getBoundingClientRect().left;
      var blockWidth = el.clientWidth || el.offsetWidth || el.scrollWidth; // apparently parallax equation everyone uses

      var percentageY = dataPercentage ? dataPercentage : (posY - blockTop + screenY) / (blockHeight + screenY);
      var percentageX = dataPercentage ? dataPercentage : (posX - blockLeft + screenX) / (blockWidth + screenX);

      if (self.options.center) {
        percentageX = 0.5;
        percentageY = 0.5;
      } // Optional individual block speed as data attr, otherwise global speed


      var speed = breakpoints && mapBreakpoints[currentBreakpoint] !== null ? Number(mapBreakpoints[currentBreakpoint]) : dataSpeed ? dataSpeed : self.options.speed;
      var verticalSpeed = dataVerticalSpeed ? dataVerticalSpeed : self.options.verticalSpeed;
      var horizontalSpeed = dataHorizontalSpeed ? dataHorizontalSpeed : self.options.horizontalSpeed; // Optional individual block movement axis direction as data attr, otherwise gobal movement direction

      var verticalScrollAxis = dataVericalScrollAxis ? dataVericalScrollAxis : self.options.verticalScrollAxis;
      var horizontalScrollAxis = dataHorizontalScrollAxis ? dataHorizontalScrollAxis : self.options.horizontalScrollAxis;
      var bases = updatePosition(percentageX, percentageY, speed, verticalSpeed, horizontalSpeed); // ~~Store non-translate3d transforms~~
      // Store inline styles and extract transforms

      var style = el.style.cssText;
      var transform = ''; // Check if there's an inline styled transform

      var searchResult = /transform\s*:/i.exec(style);

      if (searchResult) {
        // Get the index of the transform
        var index = searchResult.index; // Trim the style to the transform point and get the following semi-colon index

        var trimmedStyle = style.slice(index);
        var delimiter = trimmedStyle.indexOf(';'); // Remove "transform" string and save the attribute

        if (delimiter) {
          transform = " " + trimmedStyle.slice(11, delimiter).replace(/\s/g, '');
        } else {
          transform = " " + trimmedStyle.slice(11).replace(/\s/g, '');
        }
      }

      return {
        baseX: bases.x,
        baseY: bases.y,
        top: blockTop,
        left: blockLeft,
        height: blockHeight,
        width: blockWidth,
        speed: speed,
        verticalSpeed: verticalSpeed,
        horizontalSpeed: horizontalSpeed,
        verticalScrollAxis: verticalScrollAxis,
        horizontalScrollAxis: horizontalScrollAxis,
        style: style,
        transform: transform,
        zindex: dataZindex,
        min: dataMin,
        max: dataMax,
        minX: dataMinX,
        maxX: dataMaxX,
        minY: dataMinY,
        maxY: dataMaxY
      };
    }; // set scroll position (posY, posX)
    // side effect method is not ideal, but okay for now
    // returns true if the scroll changed, false if nothing happened


    var setPosition = function setPosition() {
      var oldY = posY;
      var oldX = posX;
      posY = self.options.wrapper ? self.options.wrapper.scrollTop : (document.documentElement || document.body.parentNode || document.body).scrollTop || window.pageYOffset;
      posX = self.options.wrapper ? self.options.wrapper.scrollLeft : (document.documentElement || document.body.parentNode || document.body).scrollLeft || window.pageXOffset; // If option relativeToWrapper is true, use relative wrapper value instead.

      if (self.options.relativeToWrapper) {
        var scrollPosY = (document.documentElement || document.body.parentNode || document.body).scrollTop || window.pageYOffset;
        posY = scrollPosY - self.options.wrapper.offsetTop;
      }

      if (oldY != posY && self.options.vertical) {
        // scroll changed, return true
        return true;
      }

      if (oldX != posX && self.options.horizontal) {
        // scroll changed, return true
        return true;
      } // scroll did not change


      return false;
    }; // Ahh a pure function, gets new transform value
    // based on scrollPosition and speed
    // Allow for decimal pixel values


    var updatePosition = function updatePosition(percentageX, percentageY, speed, verticalSpeed, horizontalSpeed) {
      var result = {};
      var valueX = (horizontalSpeed ? horizontalSpeed : speed) * (100 * (1 - percentageX));
      var valueY = (verticalSpeed ? verticalSpeed : speed) * (100 * (1 - percentageY));
      result.x = self.options.round ? Math.round(valueX) : Math.round(valueX * 100) / 100;
      result.y = self.options.round ? Math.round(valueY) : Math.round(valueY * 100) / 100;
      return result;
    }; // Remove event listeners and loop again


    var deferredUpdate = function deferredUpdate() {
      window.removeEventListener('resize', deferredUpdate);
      window.removeEventListener('orientationchange', deferredUpdate);
      (self.options.wrapper ? self.options.wrapper : window).removeEventListener('scroll', deferredUpdate);
      (self.options.wrapper ? self.options.wrapper : document).removeEventListener('touchmove', deferredUpdate); // loop again

      loopId = loop(update);
    }; // Loop


    var update = function update() {
      if (setPosition() && pause === false) {
        animate(); // loop again

        loopId = loop(update);
      } else {
        loopId = null; // Don't animate until we get a position updating event

        window.addEventListener('resize', deferredUpdate);
        window.addEventListener('orientationchange', deferredUpdate);
        (self.options.wrapper ? self.options.wrapper : window).addEventListener('scroll', deferredUpdate, supportsPassive ? {
          passive: true
        } : false);
        (self.options.wrapper ? self.options.wrapper : document).addEventListener('touchmove', deferredUpdate, supportsPassive ? {
          passive: true
        } : false);
      }
    }; // Transform3d on parallax element


    var animate = function animate() {
      var positions;

      for (var i = 0; i < self.elems.length; i++) {
        // Determine relevant movement directions
        var verticalScrollAxis = blocks[i].verticalScrollAxis.toLowerCase();
        var horizontalScrollAxis = blocks[i].horizontalScrollAxis.toLowerCase();
        var verticalScrollX = verticalScrollAxis.indexOf("x") != -1 ? posY : 0;
        var verticalScrollY = verticalScrollAxis.indexOf("y") != -1 ? posY : 0;
        var horizontalScrollX = horizontalScrollAxis.indexOf("x") != -1 ? posX : 0;
        var horizontalScrollY = horizontalScrollAxis.indexOf("y") != -1 ? posX : 0;
        var percentageY = (verticalScrollY + horizontalScrollY - blocks[i].top + screenY) / (blocks[i].height + screenY);
        var percentageX = (verticalScrollX + horizontalScrollX - blocks[i].left + screenX) / (blocks[i].width + screenX); // Subtracting initialize value, so element stays in same spot as HTML

        positions = updatePosition(percentageX, percentageY, blocks[i].speed, blocks[i].verticalSpeed, blocks[i].horizontalSpeed);
        var positionY = positions.y - blocks[i].baseY;
        var positionX = positions.x - blocks[i].baseX; // The next two "if" blocks go like this:
        // Check if a limit is defined (first "min", then "max");
        // Check if we need to change the Y or the X
        // (Currently working only if just one of the axes is enabled)
        // Then, check if the new position is inside the allowed limit
        // If so, use new position. If not, set position to limit.
        // Check if a min limit is defined

        if (blocks[i].min !== null) {
          if (self.options.vertical && !self.options.horizontal) {
            positionY = positionY <= blocks[i].min ? blocks[i].min : positionY;
          }

          if (self.options.horizontal && !self.options.vertical) {
            positionX = positionX <= blocks[i].min ? blocks[i].min : positionX;
          }
        } // Check if directional min limits are defined


        if (blocks[i].minY != null) {
          positionY = positionY <= blocks[i].minY ? blocks[i].minY : positionY;
        }

        if (blocks[i].minX != null) {
          positionX = positionX <= blocks[i].minX ? blocks[i].minX : positionX;
        } // Check if a max limit is defined


        if (blocks[i].max !== null) {
          if (self.options.vertical && !self.options.horizontal) {
            positionY = positionY >= blocks[i].max ? blocks[i].max : positionY;
          }

          if (self.options.horizontal && !self.options.vertical) {
            positionX = positionX >= blocks[i].max ? blocks[i].max : positionX;
          }
        } // Check if directional max limits are defined


        if (blocks[i].maxY != null) {
          positionY = positionY >= blocks[i].maxY ? blocks[i].maxY : positionY;
        }

        if (blocks[i].maxX != null) {
          positionX = positionX >= blocks[i].maxX ? blocks[i].maxX : positionX;
        }

        var zindex = blocks[i].zindex; // Move that element
        // (Set the new translation and append initial inline transforms.)

        var translate = 'translate3d(' + (self.options.horizontal ? positionX : '0') + 'px,' + (self.options.vertical ? positionY : '0') + 'px,' + zindex + 'px) ' + blocks[i].transform;
        self.elems[i].style[transformProp] = translate;
      }

      self.options.callback(positions);
    };

    self.destroy = function () {
      for (var i = 0; i < self.elems.length; i++) {
        self.elems[i].style.cssText = blocks[i].style;
      } // Remove resize event listener if not pause, and pause


      if (!pause) {
        window.removeEventListener('resize', init);
        pause = true;
      } // Clear the animation loop to prevent possible memory leak


      clearLoop(loopId);
      loopId = null;
    }; // Init


    init(); // Allow to recalculate the initial values whenever we want

    self.refresh = init;
    return self;
  };

  return Rellax;
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlbGF4Lm1pbi5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJSZWxsYXgiLCJ3aW5kb3ciLCJnbG9iYWwiLCJlbCIsIm9wdGlvbnMiLCJzZWxmIiwiT2JqZWN0IiwiY3JlYXRlIiwicHJvdG90eXBlIiwicG9zWSIsInNjcmVlblkiLCJwb3NYIiwic2NyZWVuWCIsImJsb2NrcyIsInBhdXNlIiwibG9vcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib1JlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbGxiYWNrIiwic2V0VGltZW91dCIsImxvb3BJZCIsInN1cHBvcnRzUGFzc2l2ZSIsIm9wdHMiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImNsZWFyTG9vcCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwibW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJjbGVhclRpbWVvdXQiLCJ0cmFuc2Zvcm1Qcm9wIiwidGVzdEVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJ2ZW5kb3JzIiwidmVuZG9yIiwidW5kZWZpbmVkIiwic3BlZWQiLCJ2ZXJ0aWNhbFNwZWVkIiwiaG9yaXpvbnRhbFNwZWVkIiwiYnJlYWtwb2ludHMiLCJjZW50ZXIiLCJ3cmFwcGVyIiwicmVsYXRpdmVUb1dyYXBwZXIiLCJyb3VuZCIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsInZlcnRpY2FsU2Nyb2xsQXhpcyIsImhvcml6b250YWxTY3JvbGxBeGlzIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ2YWxpZGF0ZUN1c3RvbUJyZWFrcG9pbnRzIiwibGVuZ3RoIiwiQXJyYXkiLCJpc0FycmF5IiwiaXNBc2NlbmRpbmciLCJpc051bWVyaWNhbCIsImxhc3RWYWwiLCJpIiwiY29uc29sZSIsIndhcm4iLCJlbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtcyIsIm5vZGVUeXBlIiwicXVlcnlTZWxlY3RvciIsImN1cnJlbnRCcmVha3BvaW50IiwiZ2V0Q3VycmVudEJyZWFrcG9pbnQiLCJ3IiwiYnAiLCJjYWNoZUJsb2NrcyIsImJsb2NrIiwiY3JlYXRlQmxvY2siLCJwdXNoIiwiaW5pdCIsImNzc1RleHQiLCJpbm5lckhlaWdodCIsImlubmVyV2lkdGgiLCJzZXRQb3NpdGlvbiIsImFuaW1hdGUiLCJ1cGRhdGUiLCJkYXRhUGVyY2VudGFnZSIsImdldEF0dHJpYnV0ZSIsImRhdGFTcGVlZCIsImRhdGFYc1NwZWVkIiwiZGF0YU1vYmlsZVNwZWVkIiwiZGF0YVRhYmxldFNwZWVkIiwiZGF0YURlc2t0b3BTcGVlZCIsImRhdGFWZXJ0aWNhbFNwZWVkIiwiZGF0YUhvcml6b250YWxTcGVlZCIsImRhdGFWZXJpY2FsU2Nyb2xsQXhpcyIsImRhdGFIb3Jpem9udGFsU2Nyb2xsQXhpcyIsImRhdGFaaW5kZXgiLCJkYXRhTWluIiwiZGF0YU1heCIsImRhdGFNaW5YIiwiZGF0YU1heFgiLCJkYXRhTWluWSIsImRhdGFNYXhZIiwibWFwQnJlYWtwb2ludHMiLCJ3cmFwcGVyUG9zWSIsInNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnRFbGVtZW50IiwiYm9keSIsInNjcm9sbFBvc1kiLCJvZmZzZXRUb3AiLCJzY3JvbGxMZWZ0IiwicGFnZVhPZmZzZXQiLCJibG9ja1RvcCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImJsb2NrSGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiYmxvY2tMZWZ0IiwibGVmdCIsImJsb2NrV2lkdGgiLCJjbGllbnRXaWR0aCIsIm9mZnNldFdpZHRoIiwic2Nyb2xsV2lkdGgiLCJwZXJjZW50YWdlWSIsInBlcmNlbnRhZ2VYIiwiTnVtYmVyIiwiYmFzZXMiLCJ1cGRhdGVQb3NpdGlvbiIsInNlYXJjaFJlc3VsdCIsImV4ZWMiLCJpbmRleCIsInRyaW1tZWRTdHlsZSIsInNsaWNlIiwiZGVsaW1pdGVyIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJiYXNlWCIsIngiLCJiYXNlWSIsInkiLCJoZWlnaHQiLCJ3aWR0aCIsInppbmRleCIsIm1pbiIsIm1heCIsIm1pblgiLCJtYXhYIiwibWluWSIsIm1heFkiLCJvbGRZIiwib2xkWCIsInBhcmVudE5vZGUiLCJyZXN1bHQiLCJ2YWx1ZVgiLCJ2YWx1ZVkiLCJNYXRoIiwiZGVmZXJyZWRVcGRhdGUiLCJwYXNzaXZlIiwicG9zaXRpb25zIiwidG9Mb3dlckNhc2UiLCJ2ZXJ0aWNhbFNjcm9sbFgiLCJ2ZXJ0aWNhbFNjcm9sbFkiLCJob3Jpem9udGFsU2Nyb2xsWCIsImhvcml6b250YWxTY3JvbGxZIiwicG9zaXRpb25ZIiwicG9zaXRpb25YIiwidHJhbnNsYXRlIiwiZGVzdHJveSIsInJlZnJlc2giXSwibWFwcGluZ3MiOiI7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQyxXQUFVQSxJQUFWLEVBQWdCQyxPQUFoQixFQUF5QjtBQUN4QixNQUFJLE9BQU9DLE1BQVAsS0FBa0IsVUFBbEIsSUFBZ0NBLE1BQU0sQ0FBQ0MsR0FBM0MsRUFBZ0Q7QUFDOUM7QUFDQUQsSUFBQUEsTUFBTSxDQUFDLEVBQUQsRUFBS0QsT0FBTCxDQUFOO0FBQ0QsR0FIRCxNQUdPLElBQUksUUFBT0csTUFBUCx5Q0FBT0EsTUFBUCxPQUFrQixRQUFsQixJQUE4QkEsTUFBTSxDQUFDQyxPQUF6QyxFQUFrRDtBQUN2RDtBQUNBO0FBQ0E7QUFDQUQsSUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCSixPQUFPLEVBQXhCO0FBQ0QsR0FMTSxNQUtBO0FBQ0w7QUFDQUQsSUFBQUEsSUFBSSxDQUFDTSxNQUFMLEdB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WCxFQUFjM0IsS0FBZCxDQUFvQjRDLE9BQXBCLEdBQThCdEUsTUFBTSxDQUFDcUQsQ0FBRCxDQUFOLENBQVUzQixLQUF4QztBQUNELE9BSHVCLENBS3hCOzs7QUFDQSxVQUFJLENBQUN6QixLQUFMLEVBQVk7QUFDVmIsUUFBQUEsTUFBTSxDQUFDNEIsbUJBQVAsQ0FBMkIsUUFBM0IsRUFBcUNxRCxJQUFyQztBQUNBcEUsUUFBQUEsS0FBSyxHQUFHLElBQVI7QUFDRCxPQVR1QixDQVd4Qjs7O0FBQ0FpQixNQUFBQSxTQUFTLENBQUNSLE1BQUQsQ0FBVDtBQUNBQSxNQUFBQSxNQUFNLEdBQUcsSUFBVDtBQUNELEtBZEQsQ0E5YmdDLENBOGNoQzs7O0FBQ0EyRCxJQUFBQSxJQUFJLEdBL2M0QixDQWlkaEM7O0FBQ0E3RSxJQUFBQSxJQUFJLENBQUMwSyxPQUFMLEdBQWU3RixJQUFmO0FBRUEsV0FBTzdFLElBQVA7QUFDRCxHQXJkRDs7QUFzZEEsU0FBT0wsTUFBUDtBQUNELENBcmVBLENBQUQiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVsbGF4LmpzXG4vLyBCdXR0ZXJ5IHNtb290aCBwYXJhbGxheCBsaWJyYXJ5XG4vLyBDb3B5cmlnaHQgKGMpIDIwMTYgTW9lIEFtYXlhIChAbW9lYW1heWEpXG4vLyBNSVQgbGljZW5zZVxuLy9cbi8vIFRoYW5rcyB0byBQYXJheGlmeS5qcyBhbmQgSmFpbWUgQ2FibGxlcm9cbi8vIGZvciBwYXJhbGxheCBjb25jZXB0c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAvLyBsaWtlIE5vZGUuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICByb290LlJlbGxheCA9IGZhY3RvcnkoKTtcbiAgfVxufSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogZ2xvYmFsLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBSZWxsYXggPSBmdW5jdGlvbihlbCwgb3B0aW9ucyl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgc2VsZiA9IE9iamVjdC5jcmVhdGUoUmVsbGF4LnByb3RvdHlwZSk7XG5cbiAgICB2YXIgcG9zWSA9IDA7XG4gICAgdmFyIHNjcmVlblkgPSAwO1xuICAgIHZhciBwb3NYID0gMDtcbiAgICB2YXIgc2NyZWVuWCA9IDA7XG4gICAgdmFyIGJsb2NrcyA9IFtdO1xuICAgIHZhciBwYXVzZSA9IHRydWU7XG5cbiAgICAvLyBjaGVjayB3aGF0IHJlcXVlc3RBbmltYXRpb25GcmFtZSB0byB1c2UsIGFuZCBpZlxuICAgIC8vIGl0J3Mgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBvbnNjcm9sbCBldmVudFxuICAgIHZhciBsb29wID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgZnVuY3Rpb24oY2FsbGJhY2speyByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTsgfTtcblxuICAgIC8vIHN0b3JlIHRoZSBpZCBmb3IgbGF0ZXIgdXNlXG4gICAgdmFyIGxvb3BJZCA9IG51bGw7XG5cbiAgICAvLyBUZXN0IHZpYSBhIGdldHRlciBpbiB0aGUgb3B0aW9ucyBvYmplY3QgdG8gc2VlIGlmIHRoZSBwYXNzaXZlIHByb3BlcnR5IGlzIGFjY2Vzc2VkXG4gICAgdmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICB2YXIgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RQYXNzaXZlXCIsIG51bGwsIG9wdHMpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLCBudWxsLCBvcHRzKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgLy8gY2hlY2sgd2hhdCBjYW5jZWxBbmltYXRpb24gbWV0aG9kIHRvIHVzZVxuICAgIHZhciBjbGVhckxvb3AgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IGNsZWFyVGltZW91dDtcblxuICAgIC8vIGNoZWNrIHdoaWNoIHRyYW5zZm9ybSBwcm9wZXJ0eSB0byB1c2VcbiAgICB2YXIgdHJhbnNmb3JtUHJvcCA9IHdpbmRvdy50cmFuc2Zvcm1Qcm9wIHx8IChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGlmICh0ZXN0RWwuc3R5bGUudHJhbnNmb3JtID09PSBudWxsKSB7XG4gICAgICAgICAgdmFyIHZlbmRvcnMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcbiAgICAgICAgICBmb3IgKHZhciB2ZW5kb3IgaW4gdmVuZG9ycykge1xuICAgICAgICAgICAgaWYgKHRlc3RFbC5zdHlsZVsgdmVuZG9yc1t2ZW5kb3JdICsgJ1RyYW5zZm9ybScgXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2ZW5kb3JzW3ZlbmRvcl0gKyAnVHJhbnNmb3JtJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICd0cmFuc2Zvcm0nO1xuICAgICAgfSkoKTtcblxuICAgIC8vIERlZmF1bHQgU2V0dGluZ3NcbiAgICBzZWxmLm9wdGlvbnMgPSB7XG4gICAgICBzcGVlZDogLTIsXG5cdCAgICB2ZXJ0aWNhbFNwZWVkOiBudWxsLFxuXHQgICAgaG9yaXpvbnRhbFNwZWVkOiBudWxsLFxuICAgICAgYnJlYWtwb2ludHM6IFs1NzYsIDc2OCwgMTIwMV0sXG4gICAgICBjZW50ZXI6IGZhbHNlLFxuICAgICAgd3JhcHBlcjogbnVsbCxcbiAgICAgIHJlbGF0aXZlVG9XcmFwcGVyOiBmYWxzZSxcbiAgICAgIHJvdW5kOiB0cnVlLFxuICAgICAgdmVydGljYWw6IHRydWUsXG4gICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgIHZlcnRpY2FsU2Nyb2xsQXhpczogXCJ5XCIsXG4gICAgICBob3Jpem9udGFsU2Nyb2xsQXhpczogXCJ4XCIsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24oKSB7fSxcbiAgICB9O1xuXG4gICAgLy8gVXNlciBkZWZpbmVkIG9wdGlvbnMgKG1pZ2h0IGhhdmUgbW9yZSBpbiB0aGUgZnV0dXJlKVxuICAgIGlmIChvcHRpb25zKXtcbiAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgc2VsZi5vcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUN1c3RvbUJyZWFrcG9pbnRzICgpIHtcbiAgICAgIGlmIChzZWxmLm9wdGlvbnMuYnJlYWtwb2ludHMubGVuZ3RoID09PSAzICYmIEFycmF5LmlzQXJyYXkoc2VsZi5vcHRpb25zLmJyZWFrcG9pbnRzKSkge1xuICAgICAgICB2YXIgaXNBc2NlbmRpbmcgPSB0cnVlO1xuICAgICAgICB2YXIgaXNOdW1lcmljYWwgPSB0cnVlO1xuICAgICAgICB2YXIgbGFzdFZhbDtcbiAgICAgICAgc2VsZi5vcHRpb25zLmJyZWFrcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGkgIT09ICdudW1iZXInKSBpc051bWVyaWNhbCA9IGZhbHNlO1xuICAgICAgICAgIGlmIChsYXN0VmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaSA8IGxhc3RWYWwpIGlzQXNjZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3RWYWwgPSBpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXNjZW5kaW5nICYmIGlzTnVtZXJpY2FsKSByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyByZXZlcnQgZGVmYXVsdHMgaWYgc2V0IGluY29ycmVjdGx5XG4gICAgICBzZWxmLm9wdGlvbnMuYnJlYWtwb2ludHMgPSBbNTc2LCA3NjgsIDEyMDFdO1xuICAgICAgY29uc29sZS53YXJuKFwiUmVsbGF4OiBZb3UgbXVzdCBwYXNzIGFuIGFycmF5IG9mIDMgbnVtYmVycyBpbiBhc2NlbmRpbmcgb3JkZXIgdG8gdGhlIGJyZWFrcG9pbnRzIG9wdGlvbi4gRGVmYXVsdHMgcmV2ZXJ0ZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5icmVha3BvaW50cykge1xuICAgICAgdmFsaWRhdGVDdXN0b21CcmVha3BvaW50cygpO1xuICAgIH1cblxuICAgIC8vIEJ5IGRlZmF1bHQsIHJlbGxheCBjbGFzc1xuICAgIGlmICghZWwpIHtcbiAgICAgIGVsID0gJy5yZWxsYXgnO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGVsIGlzIGEgY2xhc3NOYW1lIG9yIGEgbm9kZVxuICAgIHZhciBlbGVtZW50cyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsKSA6IFtlbF07XG5cbiAgICAvLyBOb3cgcXVlcnkgc2VsZWN0b3JcbiAgICBpZiAoZWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VsZi5lbGVtcyA9IGVsZW1lbnRzO1xuICAgIH1cblxuICAgIC8vIFRoZSBlbGVtZW50cyBkb24ndCBleGlzdFxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKFwiUmVsbGF4OiBUaGUgZWxlbWVudHMgeW91J3JlIHRyeWluZyB0byBzZWxlY3QgZG9uJ3QgZXhpc3QuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhhcyBhIHdyYXBwZXIgYW5kIGl0IGV4aXN0c1xuICAgIGlmIChzZWxmLm9wdGlvbnMud3JhcHBlcikge1xuICAgICAgaWYgKCFzZWxmLm9wdGlvbnMud3JhcHBlci5ub2RlVHlwZSkge1xuICAgICAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZi5vcHRpb25zLndyYXBwZXIpO1xuXG4gICAgICAgIGlmICh3cmFwcGVyKSB7XG4gICAgICAgICAgc2VsZi5vcHRpb25zLndyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIlJlbGxheDogVGhlIHdyYXBwZXIgeW91J3JlIHRyeWluZyB0byB1c2UgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0IGEgcGxhY2Vob2xkZXIgZm9yIHRoZSBjdXJyZW50IGJyZWFrcG9pbnRcbiAgICB2YXIgY3VycmVudEJyZWFrcG9pbnQ7XG5cbiAgICAvLyBoZWxwZXIgdG8gZGV0ZXJtaW5lIGN1cnJlbnQgYnJlYWtwb2ludFxuICAgIHZhciBnZXRDdXJyZW50QnJlYWtwb2ludCA9IGZ1bmN0aW9uICh3KSB7XG4gICAgICB2YXIgYnAgPSBzZWxmLm9wdGlvbnMuYnJlYWtwb2ludHM7XG4gICAgICBpZiAodyA8IGJwWzBdKSByZXR1cm4gJ3hzJztcbiAgICAgIGlmICh3ID49IGJwWzBdICYmIHcgPCBicFsxXSkgcmV0dXJuICdzbSc7XG4gICAgICBpZiAodyA+PSBicFsxXSAmJiB3IDwgYnBbMl0pIHJldHVybiAnbWQnO1xuICAgICAgcmV0dXJuICdsZyc7XG4gICAgfTtcblxuICAgIC8vIEdldCBhbmQgY2FjaGUgaW5pdGlhbCBwb3NpdGlvbiBvZiBhbGwgZWxlbWVudHNcbiAgICB2YXIgY2FjaGVCbG9ja3MgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5lbGVtcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgIHZhciBibG9jayA9IGNyZWF0ZUJsb2NrKHNlbGYuZWxlbXNbaV0pO1xuICAgICAgICBibG9ja3MucHVzaChibG9jayk7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8gTGV0J3Mga2ljayB0aGlzIHNjcmlwdCBvZmZcbiAgICAvLyBCdWlsZCBhcnJheSBmb3IgY2FjaGVkIGVsZW1lbnQgdmFsdWVzXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxvY2tzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgc2VsZi5lbGVtc1tpXS5zdHlsZS5jc3NUZXh0ID0gYmxvY2tzW2ldLnN0eWxlO1xuICAgICAgfVxuXG4gICAgICBibG9ja3MgPSBbXTtcblxuICAgICAgc2NyZWVuWSA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIHNjcmVlblggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGN1cnJlbnRCcmVha3BvaW50ID0gZ2V0Q3VycmVudEJyZWFrcG9pbnQoc2NyZWVuWCk7XG5cbiAgICAgIHNldFBvc2l0aW9uKCk7XG5cbiAgICAgIGNhY2hlQmxvY2tzKCk7XG5cbiAgICAgIGFuaW1hdGUoKTtcblxuICAgICAgLy8gSWYgcGF1c2VkLCB1bnBhdXNlIGFuZCBzZXQgbGlzdGVuZXIgZm9yIHdpbmRvdyByZXNpemluZyBldmVudHNcbiAgICAgIGlmIChwYXVzZSkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5pdCk7XG4gICAgICAgIHBhdXNlID0gZmFsc2U7XG4gICAgICAgIC8vIFN0YXJ0IHRoZSBsb29wXG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBXZSB3YW50IHRvIGNhY2hlIHRoZSBwYXJhbGxheCBibG9ja3MnXG4gICAgLy8gdmFsdWVzOiBiYXNlLCB0b3AsIGhlaWdodCwgc3BlZWRcbiAgICAvLyBlbDogaXMgZG9tIG9iamVjdCwgcmV0dXJuOiBlbCBjYWNoZSB2YWx1ZXNcbiAgICB2YXIgY3JlYXRlQmxvY2sgPSBmdW5jdGlvbihlbCkge1xuICAgICAgdmFyIGRhdGFQZXJjZW50YWdlID0gZWwuZ2V0QXR0cmlidXRlKCAnZGF0YS1yZWxsYXgtcGVyY2VudGFnZScgKTtcbiAgICAgIHZhciBkYXRhU3BlZWQgPSBlbC5nZXRBdHRyaWJ1dGUoICdkYXRhLXJlbGxheC1zcGVlZCcgKTtcbiAgICAgIHZhciBkYXRhWHNTcGVlZCA9IGVsLmdldEF0dHJpYnV0ZSggJ2RhdGEtcmVsbGF4LXhzLXNwZWVkJyApO1xuICAgICAgdmFyIGRhdGFNb2JpbGVTcGVlZCA9IGVsLmdldEF0dHJpYnV0ZSggJ2RhdGEtcmVsbGF4LW1vYmlsZS1zcGVlZCcgKTtcbiAgICAgIHZhciBkYXRhVGFibGV0U3BlZWQgPSBlbC5nZXRBdHRyaWJ1dGUoICdkYXRhLXJlbGxheC10YWJsZXQtc3BlZWQnICk7XG4gICAgICB2YXIgZGF0YURlc2t0b3BTcGVlZCA9IGVsLmdldEF0dHJpYnV0ZSggJ2RhdGEtcmVsbGF4LWRlc2t0b3Atc3BlZWQnICk7XG4gICAgICB2YXIgZGF0YVZlcnRpY2FsU3BlZWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVsbGF4LXZlcnRpY2FsLXNwZWVkJyk7XG4gICAgICB2YXIgZGF0YUhvcml6b250YWxTcGVlZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWxsYXgtaG9yaXpvbnRhbC1zcGVlZCcpO1xuICAgICAgdmFyIGRhdGFWZXJpY2FsU2Nyb2xsQXhpcyA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWxsYXgtdmVydGljYWwtc2Nyb2xsLWF4aXMnKTtcbiAgICAgIHZhciBkYXRhSG9yaXpvbnRhbFNjcm9sbEF4aXMgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVsbGF4LWhvcml6b250YWwtc2Nyb2xsLWF4aXMnKTtcbiAgICAgIHZhciBkYXRhWmluZGV4ID0gZWwuZ2V0QXR0cmlidXRlKCAnZGF0YS1yZWxsYXgtemluZGV4JyApIHx8IDA7XG4gICAgICB2YXIgZGF0YU1pbiA9IGVsLmdldEF0dHJpYnV0ZSggJ2RhdGEtcmVsbGF4LW1pbicgKTtcbiAgICAgIHZhciBkYXRhTWF4ID0gZWwuZ2V0QXR0cmlidXRlKCAnZGF0YS1yZWxsYXgtbWF4JyApO1xuICAgICAgdmFyIGRhdGFNaW5YID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXJlbGxheC1taW4teCcpO1xuICAgICAgdmFyIGRhdGFNYXhYID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXJlbGxheC1tYXgteCcpO1xuICAgICAgdmFyIGRhdGFNaW5ZID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXJlbGxheC1taW4teScpO1xuICAgICAgdmFyIGRhdGFNYXhZID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXJlbGxheC1tYXgteScpO1xuICAgICAgdmFyIG1hcEJyZWFrcG9pbnRzO1xuICAgICAgdmFyIGJyZWFrcG9pbnRzID0gdHJ1ZTtcblxuICAgICAgaWYgKCFkYXRhWHNTcGVlZCAmJiAhZGF0YU1vYmlsZVNwZWVkICYmICFkYXRhVGFibGV0U3BlZWQgJiYgIWRhdGFEZXNrdG9wU3BlZWQpIHtcbiAgICAgICAgYnJlYWtwb2ludHMgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hcEJyZWFrcG9pbnRzID0ge1xuICAgICAgICAgICd4cyc6IGRhdGFYc1NwZWVkLFxuICAgICAgICAgICdzbSc6IGRhdGFNb2JpbGVTcGVlZCxcbiAgICAgICAgICAnbWQnOiBkYXRhVGFibGV0U3BlZWQsXG4gICAgICAgICAgJ2xnJzogZGF0YURlc2t0b3BTcGVlZFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBpbml0aWFsaXppbmcgYXQgc2Nyb2xsWSA9IDAgKHRvcCBvZiBicm93c2VyKSwgc2Nyb2xsWCA9IDAgKGxlZnQgb2YgYnJvd3NlcilcbiAgICAgIC8vIGVuc3VyZXMgZWxlbWVudHMgYXJlIHBvc2l0aW9uZWQgYmFzZWQgb24gSFRNTCBsYXlvdXQuXG4gICAgICAvL1xuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFzIHRoZSBwZXJjZW50YWdlIGF0dHJpYnV0ZSwgdGhlIHBvc1kgYW5kIHBvc1ggbmVlZHMgdG8gYmVcbiAgICAgIC8vIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbidzIHZhbHVlLCBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgc3RpbGwgcG9zaXRpb25lZCBiYXNlZCBvbiBIVE1MIGxheW91dFxuICAgICAgdmFyIHdyYXBwZXJQb3NZID0gc2VsZi5vcHRpb25zLndyYXBwZXIgPyBzZWxmLm9wdGlvbnMud3JhcHBlci5zY3JvbGxUb3AgOiAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApO1xuICAgICAgLy8gSWYgdGhlIG9wdGlvbiByZWxhdGl2ZVRvV3JhcHBlciBpcyB0cnVlLCB1c2UgdGhlIHdyYXBwZXJzIG9mZnNldCB0byB0b3AsIHN1YnRyYWN0ZWQgZnJvbSB0aGUgY3VycmVudCBwYWdlIHNjcm9sbC5cbiAgICAgIGlmIChzZWxmLm9wdGlvbnMucmVsYXRpdmVUb1dyYXBwZXIpIHtcbiAgICAgICAgdmFyIHNjcm9sbFBvc1kgPSAod2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApO1xuICAgICAgICB3cmFwcGVyUG9zWSA9IHNjcm9sbFBvc1kgLSBzZWxmLm9wdGlvbnMud3JhcHBlci5vZmZzZXRUb3A7XG4gICAgICB9XG4gICAgICB2YXIgcG9zWSA9IHNlbGYub3B0aW9ucy52ZXJ0aWNhbCA/ICggZGF0YVBlcmNlbnRhZ2UgfHwgc2VsZi5vcHRpb25zLmNlbnRlciA/IHdyYXBwZXJQb3NZIDogMCApIDogMDtcbiAgICAgIHZhciBwb3NYID0gc2VsZi5vcHRpb25zLmhvcml6b250YWwgPyAoIGRhdGFQZXJjZW50YWdlIHx8IHNlbGYub3B0aW9ucy5jZW50ZXIgPyBzZWxmLm9wdGlvbnMud3JhcHBlciA/IHNlbGYub3B0aW9ucy53cmFwcGVyLnNjcm9sbExlZnQgOiAod2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCkgOiAwICkgOiAwO1xuXG4gICAgICB2YXIgYmxvY2tUb3AgPSBwb3NZICsgZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgdmFyIGJsb2NrSGVpZ2h0ID0gZWwuY2xpZW50SGVpZ2h0IHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5zY3JvbGxIZWlnaHQ7XG5cbiAgICAgIHZhciBibG9ja0xlZnQgPSBwb3NYICsgZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgIHZhciBibG9ja1dpZHRoID0gZWwuY2xpZW50V2lkdGggfHwgZWwub2Zmc2V0V2lkdGggfHwgZWwuc2Nyb2xsV2lkdGg7XG5cbiAgICAgIC8vIGFwcGFyZW50bHkgcGFyYWxsYXggZXF1YXRpb24gZXZlcnlvbmUgdXNlc1xuICAgICAgdmFyIHBlcmNlbnRhZ2VZID0gZGF0YVBlcmNlbnRhZ2UgPyBkYXRhUGVyY2VudGFnZSA6IChwb3NZIC0gYmxvY2tUb3AgKyBzY3JlZW5ZKSAvIChibG9ja0hlaWdodCArIHNjcmVlblkpO1xuICAgICAgdmFyIHBlcmNlbnRhZ2VYID0gZGF0YVBlcmNlbnRhZ2UgPyBkYXRhUGVyY2VudGFnZSA6IChwb3NYIC0gYmxvY2tMZWZ0ICsgc2NyZWVuWCkgLyAoYmxvY2tXaWR0aCArIHNjcmVlblgpO1xuICAgICAgaWYoc2VsZi5vcHRpb25zLmNlbnRlcil7IHBlcmNlbnRhZ2VYID0gMC41OyBwZXJjZW50YWdlWSA9IDAuNTsgfVxuXG4gICAgICAvLyBPcHRpb25hbCBpbmRpdmlkdWFsIGJsb2NrIHNwZWVkIGFzIGRhdGEgYXR0ciwgb3RoZXJ3aXNlIGdsb2JhbCBzcGVlZFxuICAgICAgdmFyIHNwZWVkID0gKGJyZWFrcG9pbnRzICYmIG1hcEJyZWFrcG9pbnRzW2N1cnJlbnRCcmVha3BvaW50XSAhPT0gbnVsbCkgPyBOdW1iZXIobWFwQnJlYWtwb2ludHNbY3VycmVudEJyZWFrcG9pbnRdKSA6IChkYXRhU3BlZWQgPyBkYXRhU3BlZWQgOiBzZWxmLm9wdGlvbnMuc3BlZWQpO1xuICAgICAgdmFyIHZlcnRpY2FsU3BlZWQgPSBkYXRhVmVydGljYWxTcGVlZCA/IGRhdGFWZXJ0aWNhbFNwZWVkIDogc2VsZi5vcHRpb25zLnZlcnRpY2FsU3BlZWQ7XG4gICAgICB2YXIgaG9yaXpvbnRhbFNwZWVkID0gZGF0YUhvcml6b250YWxTcGVlZCA/IGRhdGFIb3Jpem9udGFsU3BlZWQgOiBzZWxmLm9wdGlvbnMuaG9yaXpvbnRhbFNwZWVkO1xuXG4gICAgICAvLyBPcHRpb25hbCBpbmRpdmlkdWFsIGJsb2NrIG1vdmVtZW50IGF4aXMgZGlyZWN0aW9uIGFzIGRhdGEgYXR0ciwgb3RoZXJ3aXNlIGdvYmFsIG1vdmVtZW50IGRpcmVjdGlvblxuICAgICAgdmFyIHZlcnRpY2FsU2Nyb2xsQXhpcyA9IGRhdGFWZXJpY2FsU2Nyb2xsQXhpcyA/IGRhdGFWZXJpY2FsU2Nyb2xsQXhpcyA6IHNlbGYub3B0aW9ucy52ZXJ0aWNhbFNjcm9sbEF4aXM7XG4gICAgICB2YXIgaG9yaXpvbnRhbFNjcm9sbEF4aXMgPSBkYXRhSG9yaXpvbnRhbFNjcm9sbEF4aXMgPyBkYXRhSG9yaXpvbnRhbFNjcm9sbEF4aXMgOiBzZWxmLm9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbEF4aXM7XG5cbiAgICAgIHZhciBiYXNlcyA9IHVwZGF0ZVBvc2l0aW9uKHBlcmNlbnRhZ2VYLCBwZXJjZW50YWdlWSwgc3BlZWQsIHZlcnRpY2FsU3BlZWQsIGhvcml6b250YWxTcGVlZCk7XG5cbiAgICAgIC8vIH5+U3RvcmUgbm9uLXRyYW5zbGF0ZTNkIHRyYW5zZm9ybXN+flxuICAgICAgLy8gU3RvcmUgaW5saW5lIHN0eWxlcyBhbmQgZXh0cmFjdCB0cmFuc2Zvcm1zXG4gICAgICB2YXIgc3R5bGUgPSBlbC5zdHlsZS5jc3NUZXh0O1xuICAgICAgdmFyIHRyYW5zZm9ybSA9ICcnO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFuIGlubGluZSBzdHlsZWQgdHJhbnNmb3JtXG4gICAgICB2YXIgc2VhcmNoUmVzdWx0ID0gL3RyYW5zZm9ybVxccyo6L2kuZXhlYyhzdHlsZSk7XG4gICAgICBpZiAoc2VhcmNoUmVzdWx0KSB7XG4gICAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIHRyYW5zZm9ybVxuICAgICAgICB2YXIgaW5kZXggPSBzZWFyY2hSZXN1bHQuaW5kZXg7XG5cbiAgICAgICAgLy8gVHJpbSB0aGUgc3R5bGUgdG8gdGhlIHRyYW5zZm9ybSBwb2ludCBhbmQgZ2V0IHRoZSBmb2xsb3dpbmcgc2VtaS1jb2xvbiBpbmRleFxuICAgICAgICB2YXIgdHJpbW1lZFN0eWxlID0gc3R5bGUuc2xpY2UoaW5kZXgpO1xuICAgICAgICB2YXIgZGVsaW1pdGVyID0gdHJpbW1lZFN0eWxlLmluZGV4T2YoJzsnKTtcblxuICAgICAgICAvLyBSZW1vdmUgXCJ0cmFuc2Zvcm1cIiBzdHJpbmcgYW5kIHNhdmUgdGhlIGF0dHJpYnV0ZVxuICAgICAgICBpZiAoZGVsaW1pdGVyKSB7XG4gICAgICAgICAgdHJhbnNmb3JtID0gXCIgXCIgKyB0cmltbWVkU3R5bGUuc2xpY2UoMTEsIGRlbGltaXRlcikucmVwbGFjZSgvXFxzL2csJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyYW5zZm9ybSA9IFwiIFwiICsgdHJpbW1lZFN0eWxlLnNsaWNlKDExKS5yZXBsYWNlKC9cXHMvZywnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYmFzZVg6IGJhc2VzLngsXG4gICAgICAgIGJhc2VZOiBiYXNlcy55LFxuICAgICAgICB0b3A6IGJsb2NrVG9wLFxuICAgICAgICBsZWZ0OiBibG9ja0xlZnQsXG4gICAgICAgIGhlaWdodDogYmxvY2tIZWlnaHQsXG4gICAgICAgIHdpZHRoOiBibG9ja1dpZHRoLFxuICAgICAgICBzcGVlZDogc3BlZWQsXG4gICAgICAgIHZlcnRpY2FsU3BlZWQ6IHZlcnRpY2FsU3BlZWQsXG4gICAgICAgIGhvcml6b250YWxTcGVlZDogaG9yaXpvbnRhbFNwZWVkLFxuICAgICAgICB2ZXJ0aWNhbFNjcm9sbEF4aXM6IHZlcnRpY2FsU2Nyb2xsQXhpcyxcbiAgICAgICAgaG9yaXpvbnRhbFNjcm9sbEF4aXM6IGhvcml6b250YWxTY3JvbGxBeGlzLFxuICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtLFxuICAgICAgICB6aW5kZXg6IGRhdGFaaW5kZXgsXG4gICAgICAgIG1pbjogZGF0YU1pbixcbiAgICAgICAgbWF4OiBkYXRhTWF4LFxuICAgICAgICBtaW5YOiBkYXRhTWluWCxcbiAgICAgICAgbWF4WDogZGF0YU1heFgsXG4gICAgICAgIG1pblk6IGRhdGFNaW5ZLFxuICAgICAgICBtYXhZOiBkYXRhTWF4WVxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgLy8gc2V0IHNjcm9sbCBwb3NpdGlvbiAocG9zWSwgcG9zWClcbiAgICAvLyBzaWRlIGVmZmVjdCBtZXRob2QgaXMgbm90IGlkZWFsLCBidXQgb2theSBmb3Igbm93XG4gICAgLy8gcmV0dXJucyB0cnVlIGlmIHRoZSBzY3JvbGwgY2hhbmdlZCwgZmFsc2UgaWYgbm90aGluZyBoYXBwZW5lZFxuICAgIHZhciBzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9sZFkgPSBwb3NZO1xuICAgICAgdmFyIG9sZFggPSBwb3NYO1xuXG4gICAgICBwb3NZID0gc2VsZi5vcHRpb25zLndyYXBwZXIgPyBzZWxmLm9wdGlvbnMud3JhcHBlci5zY3JvbGxUb3AgOiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3AgfHwgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgcG9zWCA9IHNlbGYub3B0aW9ucy53cmFwcGVyID8gc2VsZi5vcHRpb25zLndyYXBwZXIuc2Nyb2xsTGVmdCA6IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlIHx8IGRvY3VtZW50LmJvZHkpLnNjcm9sbExlZnQgfHwgd2luZG93LnBhZ2VYT2Zmc2V0O1xuICAgICAgLy8gSWYgb3B0aW9uIHJlbGF0aXZlVG9XcmFwcGVyIGlzIHRydWUsIHVzZSByZWxhdGl2ZSB3cmFwcGVyIHZhbHVlIGluc3RlYWQuXG4gICAgICBpZiAoc2VsZi5vcHRpb25zLnJlbGF0aXZlVG9XcmFwcGVyKSB7XG4gICAgICAgIHZhciBzY3JvbGxQb3NZID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wIHx8IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgcG9zWSA9IHNjcm9sbFBvc1kgLSBzZWxmLm9wdGlvbnMud3JhcHBlci5vZmZzZXRUb3A7XG4gICAgICB9XG5cblxuICAgICAgaWYgKG9sZFkgIT0gcG9zWSAmJiBzZWxmLm9wdGlvbnMudmVydGljYWwpIHtcbiAgICAgICAgLy8gc2Nyb2xsIGNoYW5nZWQsIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob2xkWCAhPSBwb3NYICYmIHNlbGYub3B0aW9ucy5ob3Jpem9udGFsKSB7XG4gICAgICAgIC8vIHNjcm9sbCBjaGFuZ2VkLCByZXR1cm4gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gc2Nyb2xsIGRpZCBub3QgY2hhbmdlXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8vIEFoaCBhIHB1cmUgZnVuY3Rpb24sIGdldHMgbmV3IHRyYW5zZm9ybSB2YWx1ZVxuICAgIC8vIGJhc2VkIG9uIHNjcm9sbFBvc2l0aW9uIGFuZCBzcGVlZFxuICAgIC8vIEFsbG93IGZvciBkZWNpbWFsIHBpeGVsIHZhbHVlc1xuICAgIHZhciB1cGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uKHBlcmNlbnRhZ2VYLCBwZXJjZW50YWdlWSwgc3BlZWQsIHZlcnRpY2FsU3BlZWQsIGhvcml6b250YWxTcGVlZCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgdmFyIHZhbHVlWCA9ICgoaG9yaXpvbnRhbFNwZWVkID8gaG9yaXpvbnRhbFNwZWVkIDogc3BlZWQpICogKDEwMCAqICgxIC0gcGVyY2VudGFnZVgpKSk7XG4gICAgICB2YXIgdmFsdWVZID0gKCh2ZXJ0aWNhbFNwZWVkID8gdmVydGljYWxTcGVlZCA6IHNwZWVkKSAqICgxMDAgKiAoMSAtIHBlcmNlbnRhZ2VZKSkpO1xuXG4gICAgICByZXN1bHQueCA9IHNlbGYub3B0aW9ucy5yb3VuZCA/IE1hdGgucm91bmQodmFsdWVYKSA6IE1hdGgucm91bmQodmFsdWVYICogMTAwKSAvIDEwMDtcbiAgICAgIHJlc3VsdC55ID0gc2VsZi5vcHRpb25zLnJvdW5kID8gTWF0aC5yb3VuZCh2YWx1ZVkpIDogTWF0aC5yb3VuZCh2YWx1ZVkgKiAxMDApIC8gMTAwO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGFuZCBsb29wIGFnYWluXG4gICAgdmFyIGRlZmVycmVkVXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVmZXJyZWRVcGRhdGUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgZGVmZXJyZWRVcGRhdGUpO1xuICAgICAgKHNlbGYub3B0aW9ucy53cmFwcGVyID8gc2VsZi5vcHRpb25zLndyYXBwZXIgOiB3aW5kb3cpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRlZmVycmVkVXBkYXRlKTtcbiAgICAgIChzZWxmLm9wdGlvbnMud3JhcHBlciA/IHNlbGYub3B0aW9ucy53cmFwcGVyIDogZG9jdW1lbnQpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGRlZmVycmVkVXBkYXRlKTtcblxuICAgICAgLy8gbG9vcCBhZ2FpblxuICAgICAgbG9vcElkID0gbG9vcCh1cGRhdGUpO1xuICAgIH07XG5cbiAgICAvLyBMb29wXG4gICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHNldFBvc2l0aW9uKCkgJiYgcGF1c2UgPT09IGZhbHNlKSB7XG4gICAgICAgIGFuaW1hdGUoKTtcblxuICAgICAgICAvLyBsb29wIGFnYWluXG4gICAgICAgIGxvb3BJZCA9IGxvb3AodXBkYXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvb3BJZCA9IG51bGw7XG5cbiAgICAgICAgLy8gRG9uJ3QgYW5pbWF0ZSB1bnRpbCB3ZSBnZXQgYSBwb3NpdGlvbiB1cGRhdGluZyBldmVudFxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVmZXJyZWRVcGRhdGUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBkZWZlcnJlZFVwZGF0ZSk7XG4gICAgICAgIChzZWxmLm9wdGlvbnMud3JhcHBlciA/IHNlbGYub3B0aW9ucy53cmFwcGVyIDogd2luZG93KS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZWZlcnJlZFVwZGF0ZSwgc3VwcG9ydHNQYXNzaXZlID8geyBwYXNzaXZlOiB0cnVlIH0gOiBmYWxzZSk7XG4gICAgICAgIChzZWxmLm9wdGlvbnMud3JhcHBlciA/IHNlbGYub3B0aW9ucy53cmFwcGVyIDogZG9jdW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGRlZmVycmVkVXBkYXRlLCBzdXBwb3J0c1Bhc3NpdmUgPyB7IHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVHJhbnNmb3JtM2Qgb24gcGFyYWxsYXggZWxlbWVudFxuICAgIHZhciBhbmltYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb25zO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmVsZW1zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHJlbGV2YW50IG1vdmVtZW50IGRpcmVjdGlvbnNcbiAgICAgICAgdmFyIHZlcnRpY2FsU2Nyb2xsQXhpcyA9IGJsb2Nrc1tpXS52ZXJ0aWNhbFNjcm9sbEF4aXMudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIGhvcml6b250YWxTY3JvbGxBeGlzID0gYmxvY2tzW2ldLmhvcml6b250YWxTY3JvbGxBeGlzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciB2ZXJ0aWNhbFNjcm9sbFggPSB2ZXJ0aWNhbFNjcm9sbEF4aXMuaW5kZXhPZihcInhcIikgIT0gLTEgPyBwb3NZIDogMDtcbiAgICAgICAgdmFyIHZlcnRpY2FsU2Nyb2xsWSA9IHZlcnRpY2FsU2Nyb2xsQXhpcy5pbmRleE9mKFwieVwiKSAhPSAtMSA/IHBvc1kgOiAwO1xuICAgICAgICB2YXIgaG9yaXpvbnRhbFNjcm9sbFggPSBob3Jpem9udGFsU2Nyb2xsQXhpcy5pbmRleE9mKFwieFwiKSAhPSAtMSA/IHBvc1ggOiAwO1xuICAgICAgICB2YXIgaG9yaXpvbnRhbFNjcm9sbFkgPSBob3Jpem9udGFsU2Nyb2xsQXhpcy5pbmRleE9mKFwieVwiKSAhPSAtMSA/IHBvc1ggOiAwO1xuXG4gICAgICAgIHZhciBwZXJjZW50YWdlWSA9ICgodmVydGljYWxTY3JvbGxZICsgaG9yaXpvbnRhbFNjcm9sbFkgLSBibG9ja3NbaV0udG9wICsgc2NyZWVuWSkgLyAoYmxvY2tzW2ldLmhlaWdodCArIHNjcmVlblkpKTtcbiAgICAgICAgdmFyIHBlcmNlbnRhZ2VYID0gKCh2ZXJ0aWNhbFNjcm9sbFggKyBob3Jpem9udGFsU2Nyb2xsWCAtIGJsb2Nrc1tpXS5sZWZ0ICsgc2NyZWVuWCkgLyAoYmxvY2tzW2ldLndpZHRoICsgc2NyZWVuWCkpO1xuXG4gICAgICAgIC8vIFN1YnRyYWN0aW5nIGluaXRpYWxpemUgdmFsdWUsIHNvIGVsZW1lbnQgc3RheXMgaW4gc2FtZSBzcG90IGFzIEhUTUxcbiAgICAgICAgcG9zaXRpb25zID0gdXBkYXRlUG9zaXRpb24ocGVyY2VudGFnZVgsIHBlcmNlbnRhZ2VZLCBibG9ja3NbaV0uc3BlZWQsIGJsb2Nrc1tpXS52ZXJ0aWNhbFNwZWVkLCBibG9ja3NbaV0uaG9yaXpvbnRhbFNwZWVkKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uWSA9IHBvc2l0aW9ucy55IC0gYmxvY2tzW2ldLmJhc2VZO1xuICAgICAgICB2YXIgcG9zaXRpb25YID0gcG9zaXRpb25zLnggLSBibG9ja3NbaV0uYmFzZVg7XG5cbiAgICAgICAgLy8gVGhlIG5leHQgdHdvIFwiaWZcIiBibG9ja3MgZ28gbGlrZSB0aGlzOlxuICAgICAgICAvLyBDaGVjayBpZiBhIGxpbWl0IGlzIGRlZmluZWQgKGZpcnN0IFwibWluXCIsIHRoZW4gXCJtYXhcIik7XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBZIG9yIHRoZSBYXG4gICAgICAgIC8vIChDdXJyZW50bHkgd29ya2luZyBvbmx5IGlmIGp1c3Qgb25lIG9mIHRoZSBheGVzIGlzIGVuYWJsZWQpXG4gICAgICAgIC8vIFRoZW4sIGNoZWNrIGlmIHRoZSBuZXcgcG9zaXRpb24gaXMgaW5zaWRlIHRoZSBhbGxvd2VkIGxpbWl0XG4gICAgICAgIC8vIElmIHNvLCB1c2UgbmV3IHBvc2l0aW9uLiBJZiBub3QsIHNldCBwb3NpdGlvbiB0byBsaW1pdC5cblxuICAgICAgICAvLyBDaGVjayBpZiBhIG1pbiBsaW1pdCBpcyBkZWZpbmVkXG4gICAgICAgIGlmIChibG9ja3NbaV0ubWluICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy52ZXJ0aWNhbCAmJiAhc2VsZi5vcHRpb25zLmhvcml6b250YWwpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWSA9IHBvc2l0aW9uWSA8PSBibG9ja3NbaV0ubWluID8gYmxvY2tzW2ldLm1pbiA6IHBvc2l0aW9uWTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5ob3Jpem9udGFsICYmICFzZWxmLm9wdGlvbnMudmVydGljYWwpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWCA9IHBvc2l0aW9uWCA8PSBibG9ja3NbaV0ubWluID8gYmxvY2tzW2ldLm1pbiA6IHBvc2l0aW9uWDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBkaXJlY3Rpb25hbCBtaW4gbGltaXRzIGFyZSBkZWZpbmVkXG4gICAgICAgIGlmIChibG9ja3NbaV0ubWluWSAhPSBudWxsKSB7XG4gICAgICAgICAgICBwb3NpdGlvblkgPSBwb3NpdGlvblkgPD0gYmxvY2tzW2ldLm1pblkgPyBibG9ja3NbaV0ubWluWSA6IHBvc2l0aW9uWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmxvY2tzW2ldLm1pblggIT0gbnVsbCkge1xuICAgICAgICAgICAgcG9zaXRpb25YID0gcG9zaXRpb25YIDw9IGJsb2Nrc1tpXS5taW5YID8gYmxvY2tzW2ldLm1pblggOiBwb3NpdGlvblg7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBhIG1heCBsaW1pdCBpcyBkZWZpbmVkXG4gICAgICAgIGlmIChibG9ja3NbaV0ubWF4ICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy52ZXJ0aWNhbCAmJiAhc2VsZi5vcHRpb25zLmhvcml6b250YWwpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWSA9IHBvc2l0aW9uWSA+PSBibG9ja3NbaV0ubWF4ID8gYmxvY2tzW2ldLm1heCA6IHBvc2l0aW9uWTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5ob3Jpem9udGFsICYmICFzZWxmLm9wdGlvbnMudmVydGljYWwpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWCA9IHBvc2l0aW9uWCA+PSBibG9ja3NbaV0ubWF4ID8gYmxvY2tzW2ldLm1heCA6IHBvc2l0aW9uWDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBkaXJlY3Rpb25hbCBtYXggbGltaXRzIGFyZSBkZWZpbmVkXG4gICAgICAgIGlmIChibG9ja3NbaV0ubWF4WSAhPSBudWxsKSB7XG4gICAgICAgICAgICBwb3NpdGlvblkgPSBwb3NpdGlvblkgPj0gYmxvY2tzW2ldLm1heFkgPyBibG9ja3NbaV0ubWF4WSA6IHBvc2l0aW9uWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmxvY2tzW2ldLm1heFggIT0gbnVsbCkge1xuICAgICAgICAgICAgcG9zaXRpb25YID0gcG9zaXRpb25YID49IGJsb2Nrc1tpXS5tYXhYID8gYmxvY2tzW2ldLm1heFggOiBwb3NpdGlvblg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgemluZGV4ID0gYmxvY2tzW2ldLnppbmRleDtcblxuICAgICAgICAvLyBNb3ZlIHRoYXQgZWxlbWVudFxuICAgICAgICAvLyAoU2V0IHRoZSBuZXcgdHJhbnNsYXRpb24gYW5kIGFwcGVuZCBpbml0aWFsIGlubGluZSB0cmFuc2Zvcm1zLilcbiAgICAgICAgdmFyIHRyYW5zbGF0ZSA9ICd0cmFuc2xhdGUzZCgnICsgKHNlbGYub3B0aW9ucy5ob3Jpem9udGFsID8gcG9zaXRpb25YIDogJzAnKSArICdweCwnICsgKHNlbGYub3B0aW9ucy52ZXJ0aWNhbCA/IHBvc2l0aW9uWSA6ICcwJykgKyAncHgsJyArIHppbmRleCArICdweCkgJyArIGJsb2Nrc1tpXS50cmFuc2Zvcm07XG4gICAgICAgIHNlbGYuZWxlbXNbaV0uc3R5bGVbdHJhbnNmb3JtUHJvcF0gPSB0cmFuc2xhdGU7XG4gICAgICB9XG4gICAgICBzZWxmLm9wdGlvbnMuY2FsbGJhY2socG9zaXRpb25zKTtcbiAgICB9O1xuXG4gICAgc2VsZi5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuZWxlbXMubGVuZ3RoOyBpKyspe1xuICAgICAgICBzZWxmLmVsZW1zW2ldLnN0eWxlLmNzc1RleHQgPSBibG9ja3NbaV0uc3R5bGU7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSByZXNpemUgZXZlbnQgbGlzdGVuZXIgaWYgbm90IHBhdXNlLCBhbmQgcGF1c2VcbiAgICAgIGlmICghcGF1c2UpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluaXQpO1xuICAgICAgICBwYXVzZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBhbmltYXRpb24gbG9vcCB0byBwcmV2ZW50IHBvc3NpYmxlIG1lbW9yeSBsZWFrXG4gICAgICBjbGVhckxvb3AobG9vcElkKTtcbiAgICAgIGxvb3BJZCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEluaXRcbiAgICBpbml0KCk7XG5cbiAgICAvLyBBbGxvdyB0byByZWNhbGN1bGF0ZSB0aGUgaW5pdGlhbCB2YWx1ZXMgd2hlbmV2ZXIgd2Ugd2FudFxuICAgIHNlbGYucmVmcmVzaCA9IGluaXQ7XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcbiAgcmV0dXJuIFJlbGxheDtcbn0pKTtcbiJdLCJmaWxlIjoicmVsYXgubWluLmpzIn0=
